(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[655],{1166:(e,t,s)=>{"use strict";s.d(t,{$:()=>i});var r=s(5155);s(2115);var a=s(4269);function i(e){let{className:t,variant:s="primary",size:i="md",...l}=e;return(0,r.jsx)("button",{className:(0,a.cn)("inline-flex items-center justify-center rounded-full font-semibold uppercase tracking-wide transition duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 disabled:opacity-60","primary"===s&&"bg-gradient-to-r from-sky-400 via-fuchsia-500 to-emerald-400 text-white shadow-[0_15px_35px_rgba(8,47,73,0.45)] hover:opacity-90","secondary"===s&&"border border-white/15 bg-white/10 text-white shadow-[0_10px_25px_rgba(0,0,0,0.4)] hover:bg-white/20","ghost"===s&&"text-white/80 hover:text-white hover:bg-white/10","destructive"===s&&"bg-gradient-to-r from-rose-500 to-orange-500 text-white shadow-[0_15px_35px_rgba(127,29,29,0.45)] hover:opacity-90","sm"===i&&"px-3.5 py-1.5 text-[11px]","md"===i&&"px-4 py-2 text-sm","lg"===i&&"px-5 py-2.5 text-base",t),...l})}},1289:(e,t,s)=>{"use strict";s.d(t,{N:()=>l});var r=s(2373);let a="https://tosrqizgsvmqxgcmvrgm.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvc3JxaXpnc3ZtcXhnY212cmdtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwNzg3NTYsImV4cCI6MjA4MTY1NDc1Nn0.3SjpqNotspin0hy4MztwG5uG_AFHSSdhiD47gqmc9G8",l=a&&i?(0,r.UU)(a,i,{auth:{detectSessionInUrl:!0,persistSession:!0}}):null},3200:(e,t,s)=>{Promise.resolve().then(s.bind(s,5858))},3449:(e,t,s)=>{"use strict";s.d(t,{P_:()=>m,Pj:()=>j,n4:()=>w});var r=s(1289),a=s(4986);let i="flexlog:v1",l="flexlog:device-id",n="user_snapshots",o=null,c=null,d=null,x=null,g=null;function m(e){g=e}function u(e){return JSON.parse(JSON.stringify(e))}async function h(e){1;try{await fetch("/api/storage/snapshot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deviceId:function(){try{let e=localStorage.getItem(l);if(e)return e;return e="undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2),localStorage.setItem(l,e),e}catch(e){return"fallback-device"}}(),state:e})})}catch(e){console.warn("Failed to sync Supabase snapshot",e)}}async function p(e){if(g&&r.N)try{let{error:t}=await r.N.from(n).upsert({user_id:g,state:e,updated_at:new Date().toISOString()});t&&console.warn("Failed to sync user snapshot",t)}catch(e){console.warn("Failed to sync user snapshot",e)}}function b(e){1;if(g&&r.N){if(d=u(e),x)return;x=window.setTimeout(()=>{x=null,d&&p(d).catch(()=>{})},1e3);return}o=u(e),c||(c=window.setTimeout(()=>{c=null,o&&h(o).catch(()=>{})},1e3))}function f(){return{units:"lb",selectedDate:(0,a.GP)(new Date,"yyyy-MM-dd"),onboarding:null,targets:null,logs:{},workoutDays:[],indicators:{},strengthTrackerEnabled:!0,bodyweightOverride:null,weightLogs:{}}}function v(){try{let e=localStorage.getItem(i);if(!e)return f();let t=JSON.parse(e);return{...f(),...t}}catch(e){return f()}}async function w(e){if(!r.N)return{synced:!1,reason:"supabase_not_configured"};g=e;let{data:t,error:s}=await r.N.from(n).select("state").eq("user_id",e).maybeSingle();return s?(console.warn("Failed to fetch user snapshot",s),{synced:!1,reason:"fetch_error"}):(null==t?void 0:t.state)?(localStorage.setItem(i,JSON.stringify(t.state)),b(t.state),{synced:!0,reason:"loaded_remote"}):(b(v()),{synced:!0,reason:"no_remote"})}function j(){let e=()=>v(),t=t=>{let s=t(e());return localStorage.setItem(i,JSON.stringify(s)),b(s),s};return{exportAll:()=>e(),clearAll:()=>localStorage.removeItem(i),getUnits:()=>e().units,setUnits:e=>t(t=>({...t,units:e})),getSelectedDate:()=>e().selectedDate,setSelectedDate:e=>t(t=>({...t,selectedDate:e})),getOnboarding:()=>e().onboarding,setOnboarding:e=>t(t=>({...t,onboarding:e})),getTargets:()=>e().targets,setTargets:e=>t(t=>({...t,targets:e})),getDailyLog:t=>{var s;return null!=(s=e().logs[t])?s:{date:t,mealGroups:[]}},setDailyLog:e=>t(t=>({...t,logs:{...t.logs,[e.date]:e},indicators:{...t.indicators,[e.date]:"dot"}})),addFoodItem:(e,s,r)=>t(t=>{var a;let i=null!=(a=t.logs[e])?a:{date:e,mealGroups:[]},l=i.mealGroups.map(e=>e.id===s?{...e,items:[...e.items,r]}:e),n={...i,mealGroups:l};return{...t,logs:{...t.logs,[e]:n},indicators:{...t.indicators,[e]:"dot"}}}),getDayIndicator:t=>{var s;return null!=(s=e().indicators[t])?s:"none"},getWorkoutDays:()=>e().workoutDays,setWorkoutDays:e=>t(t=>({...t,workoutDays:e})),getStrengthTrackerEnabled:()=>{var t;return null==(t=e().strengthTrackerEnabled)||t},setStrengthTrackerEnabled:e=>t(t=>({...t,strengthTrackerEnabled:e})),getBodyweightOverride:()=>{var t;return null!=(t=e().bodyweightOverride)?t:null},setBodyweightOverride:e=>t(t=>({...t,bodyweightOverride:e})),bumpWorkoutIndicator:e=>t(t=>({...t,indicators:{...t.indicators,[e]:"dot"}})),syncSnapshotsNow:()=>h(e()),getWeightLogs:()=>{var t;return null!=(t=e().weightLogs)?t:{}},setWeightLog:(e,s)=>t(t=>({...t,weightLogs:{...t.weightLogs,[e]:s}})),removeWeightLog:e=>t(t=>{let s={...t.weightLogs};return delete s[e],{...t,weightLogs:s}})}}},4269:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i,s:()=>l});var r=s(2821),a=s(5889);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}function l(e,t){let s;return function(){for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];clearTimeout(s),s=setTimeout(()=>e(...a),t)}}},5590:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var r=s(5155);s(2115);var a=s(4269);function i(e){let{label:t,className:s,disabled:i,...l}=e;return(0,r.jsxs)("label",{className:(0,a.cn)("block space-y-2",s,i&&"opacity-60"),children:[t?(0,r.jsx)("div",{className:"text-[10px] uppercase tracking-[0.35em] text-white/60",children:t}):null,(0,r.jsx)("input",{disabled:i,className:(0,a.cn)("w-full rounded-2xl border border-white/10 bg-white/10 px-4 py-3 text-sm text-white placeholder:text-white/40 transition focus:border-white/40 focus:outline-none",i&&"cursor-not-allowed opacity-70"),...l})]})}},5795:(e,t,s)=>{"use strict";s.d(t,{V:()=>n});var r=s(5155),a=s(2115),i=s(4486),l=s(4269);function n(e){let{title:t,subtitle:s,right:n,className:o}=e,[c,d]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=()=>d(window.scrollY>8);return e(),window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)},[]),(0,r.jsx)(i.P.div,{className:(0,l.cn)("sticky top-0 z-30 rounded-3xl border border-white/10 bg-white/5 px-4 py-4 backdrop-blur-xl shadow-[0_20px_60px_rgba(2,4,13,0.55)]",c?"border-white/15 bg-white/10":"",o),animate:{paddingTop:c?12:16,paddingBottom:c?12:16},transition:{duration:.18},children:(0,r.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-zinc-400",children:s}),(0,r.jsx)("div",{className:"text-xl font-semibold tracking-tight",children:t})]}),n?(0,r.jsx)("div",{children:n}):null]})})}},5858:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>I});var r=s(5155),a=s(2115),i=s(4986),l=s(6467),n=s(5795),o=s(8674),c=s(8901),d=s(2192),x=s(1321),g=s(2381),m=s(5405),u=s(7141),h=s(4269);function p(e){let{selectedDate:t,onSelectDate:s,getIndicator:a}=e,n=(0,l.H)(t),p=(0,o.w)(n),b=(0,c.p)(n),f=(0,d.k)(p,{weekStartsOn:0}),v=(0,x.$)(b,{weekStartsOn:0}),w=[];for(let e=f;e<=v;e=(0,g.f)(e,1))w.push(e);return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-2 flex items-center justify-between",children:(0,r.jsx)("div",{className:"text-sm font-medium",children:(0,i.GP)(n,"MMMM yyyy")})}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-1 text-xs text-zinc-500",children:["S","M","T","W","T","F","S"].map((e,t)=>(0,r.jsx)("div",{className:"grid place-items-center py-1",children:e},"".concat(e,"-").concat(t)))}),(0,r.jsx)("div",{className:"mt-1 grid grid-cols-7 gap-1",children:w.map(e=>{var t;let l=(0,i.GP)(e,"yyyy-MM-dd"),o=(0,m.r)(e,n),c=(0,u.t)(e,n),d=null!=(t=null==a?void 0:a(l))?t:"none";return(0,r.jsxs)("button",{onClick:()=>s(l),className:(0,h.cn)("relative grid h-10 place-items-center rounded-2xl border text-sm transition",c?"border-zinc-800 bg-zinc-950/40 hover:border-zinc-700":"border-zinc-900 bg-zinc-950/20 text-zinc-600",o?"border-zinc-600 bg-zinc-900/50":""),children:[(0,r.jsx)("span",{children:(0,i.GP)(e,"d")}),"dot"===d&&(0,r.jsx)("span",{className:"absolute bottom-1 h-1 w-1 rounded-full bg-zinc-300 opacity-80"})]},l)})})]})}var b=s(7972),f=s(1166),v=s(5590),w=s(6191),j=s(3449),y=s(2619),N=s.n(y),_=s(4486),k=s(1408),S=s(4033),z=s(1360);function F(e){let{date:t,group:s,onChange:i,onDelete:l}=e,[n,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(s.name),x=(0,a.useMemo)(()=>s.items.reduce((e,t)=>(e.calories+=t.calories,e.protein_g+=t.protein_g,e.carbs_g+=t.carbs_g,e.fat_g+=t.fat_g,e),{calories:0,protein_g:0,carbs_g:0,fat_g:0}),[s.items]);return(0,r.jsx)(_.P.div,{layout:!0,children:(0,r.jsxs)(b.Z,{className:"p-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-3 p-4",children:[(0,r.jsx)("div",{className:"min-w-0 flex-1",children:n?(0,r.jsxs)("div",{className:"flex items-end gap-2",children:[(0,r.jsx)(v.p,{label:"Meal group name",value:c,onChange:e=>d(e.target.value)}),(0,r.jsx)(f.$,{onClick:()=>{let e=c.trim();e&&(i({...s,name:e}),o(!1))},children:"Save"}),(0,r.jsx)(f.$,{variant:"ghost",onClick:()=>{o(!1),d(s.name)},children:"Cancel"})]}):(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>i({...s,collapsed:!s.collapsed}),className:"grid h-9 w-9 place-items-center rounded-2xl bg-zinc-900/40 ring-1 ring-zinc-800 transition hover:bg-zinc-900/60",title:s.collapsed?"Expand":"Collapse",children:(0,r.jsx)(_.P.div,{animate:{rotate:s.collapsed?-90:0},transition:{duration:.18},children:(0,r.jsx)(S.A,{className:"h-4 w-4"})})}),(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("div",{className:"truncate text-base font-semibold tracking-tight",children:s.name}),(0,r.jsxs)("div",{className:"text-sm text-zinc-400",children:[x.calories.toFixed(0)," kcal • P ",x.protein_g.toFixed(0),"g • C ",x.carbs_g.toFixed(0),"g • F ",x.fat_g.toFixed(0),"g"]})]})]})}),!n&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(N(),{href:"/foods?group=".concat(s.id),children:(0,r.jsxs)(f.$,{variant:"secondary",children:[(0,r.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Add food"]})}),(0,r.jsx)(f.$,{variant:"ghost",onClick:()=>o(!0),children:"Rename"}),(0,r.jsxs)(f.$,{variant:"destructive",onClick:l,children:[(0,r.jsx)(z.A,{className:"mr-2 h-4 w-4"})," Delete"]})]})]}),(0,r.jsx)(k.N,{initial:!1,children:!s.collapsed&&(0,r.jsx)(_.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:(0,r.jsx)("div",{className:"border-t border-zinc-900 p-4",children:0===s.items.length?(0,r.jsx)("div",{className:"rounded-2xl border border-zinc-800 bg-zinc-950/40 p-4 text-sm text-zinc-400",children:"No foods yet. Click “Add food”."}):(0,r.jsx)("div",{className:"grid gap-2",children:s.items.map(e=>(0,r.jsx)(_.P.div,{layout:!0,className:(0,h.cn)("rounded-2xl border border-zinc-800 bg-zinc-950/30 p-3"),children:(0,r.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("div",{className:"truncate font-medium",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-zinc-400",children:[e.calories.toFixed(0)," kcal • P ",e.protein_g.toFixed(0),"g • C ",e.carbs_g.toFixed(0),"g • F ",e.fat_g.toFixed(0),"g"]}),(0,r.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:[e.source,e.barcode?" • ".concat(e.barcode):""," • ",e.qty," ",e.unit]})]}),(0,r.jsx)("button",{onClick:()=>{i({...s,items:s.items.filter(t=>t.id!==e.id)})},className:"rounded-xl border border-zinc-800 bg-zinc-950/40 px-3 py-2 text-xs text-zinc-300 transition hover:border-zinc-700",title:"Remove item",children:"Remove"})]})},e.id))})})},"body")})]})})}let D="1970-01-01";function I(){let e=(0,j.Pj)(),[t,s]=(0,a.useState)(!1),[o,c]=(0,a.useState)(D),[d,x]=(0,a.useState)({date:D,mealGroups:[]}),[g,m]=(0,a.useState)(null);(0,a.useEffect)(()=>{var t;let r=null!=(t=e.getSelectedDate())?t:(0,i.GP)(new Date,"yyyy-MM-dd");c(r),x(e.getDailyLog(r)),m(e.getTargets()),s(!0)},[]),(0,a.useEffect)(()=>{t&&(e.setSelectedDate(o),x(e.getDailyLog(o)),m(e.getTargets()))},[o,t]);let u=(0,a.useMemo)(()=>d.mealGroups.flatMap(e=>e.items).reduce((e,t)=>(e.calories+=t.calories,e.protein_g+=t.protein_g,e.carbs_g+=t.carbs_g,e.fat_g+=t.fat_g,e),{calories:0,protein_g:0,carbs_g:0,fat_g:0}),[d]),h=(0,a.useMemo)(()=>[{key:"protein",label:"Protein",grams:u.protein_g,color:"#38bdf8"},{key:"carbs",label:"Carbs",grams:u.carbs_g,color:"#34d399"},{key:"fat",label:"Fat",grams:u.fat_g,color:"#fbbf24"}],[u.protein_g,u.carbs_g,u.fat_g]),v=g?{calories:Math.max(0,g.calories-u.calories),protein_g:Math.max(0,g.protein_g-u.protein_g),carbs_g:Math.max(0,g.carbs_g-u.carbs_g),fat_g:Math.max(0,g.fat_g-u.fat_g)}:null;function w(t){let s={...d,mealGroups:d.mealGroups.map(e=>e.id===t.id?t:e)};x(s),e.setDailyLog(s)}return(0,r.jsxs)("div",{className:"relative min-h-screen overflow-hidden bg-[#02040d] text-zinc-100",children:[(0,r.jsxs)("div",{className:"pointer-events-none absolute inset-0",children:[(0,r.jsx)("div",{className:"absolute -top-40 right-10 h-96 w-96 rounded-full bg-fuchsia-600/20 blur-[200px]"}),(0,r.jsx)("div",{className:"absolute left-[-10%] top-20 h-96 w-96 rounded-full bg-sky-500/20 blur-[180px]"}),(0,r.jsx)("div",{className:"absolute bottom-[-30%] right-0 h-80 w-80 rounded-full bg-emerald-500/10 blur-[160px]"})]}),(0,r.jsxs)("div",{className:"relative mx-auto max-w-6xl px-4 py-10",children:[(0,r.jsx)(n.V,{title:"Daily Log",subtitle:(0,i.GP)((0,l.H)(o),"EEE, MMM d"),className:"border-white/10 bg-white/5 shadow-[0_15px_35px_rgba(0,0,0,0.35)]",right:(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,r.jsx)(N(),{href:"/foods",children:(0,r.jsx)(f.$,{variant:"ghost",className:"rounded-full bg-gradient-to-r from-sky-400 via-fuchsia-500 to-emerald-400 px-5 py-2 text-sm font-semibold text-white shadow-[0_10px_40px_rgba(56,189,248,0.3)]",children:"Find food"})}),(0,r.jsx)(N(),{href:"/onboarding",children:(0,r.jsx)(f.$,{variant:"ghost",className:"rounded-full border border-white/20 bg-white/10 px-5 py-2 text-sm font-semibold text-white hover:bg-white/20",children:"Targets"})})]})}),(0,r.jsxs)("div",{className:"mt-8 grid gap-6 lg:grid-cols-[320px,1fr]",children:[(0,r.jsxs)(b.Z,{className:"border-white/10 bg-white/5 shadow-[0_25px_60px_rgba(3,7,18,0.45)]",children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-[0.3em] text-sky-300",children:"Plan"}),(0,r.jsx)("div",{className:"mt-2 text-3xl font-semibold",children:"Calendar"}),(0,r.jsx)("div",{className:"mt-4 rounded-3xl border border-white/10 bg-black/30 p-3",children:(0,r.jsx)(p,{selectedDate:o,onSelectDate:c,getIndicator:t?t=>e.getDayIndicator(t):()=>"none"})})]}),(0,r.jsxs)("div",{className:"grid gap-5",children:[(0,r.jsx)(b.Z,{className:"overflow-hidden border-white/10 bg-gradient-to-br from-white/5 via-sky-500/10 to-fuchsia-600/10 shadow-[0_30px_80px_rgba(8,47,73,0.55)]",children:(0,r.jsxs)("div",{className:"relative flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-sky-200",children:"Today"}),(0,r.jsx)("h1",{className:"mt-2 text-3xl font-semibold text-white",children:g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-transparent bg-gradient-to-r from-sky-300 via-fuchsia-300 to-emerald-300 bg-clip-text",children:u.calories.toFixed(0)})," ",(0,r.jsxs)("span",{className:"text-zinc-400",children:["/ ",g.calories.toFixed(0)," kcal"]})]}):"".concat(u.calories.toFixed(0)," kcal")}),(0,r.jsxs)("p",{className:"mt-2 text-sm text-zinc-300",children:["Protein ",u.protein_g.toFixed(0),"g • Carbs ",u.carbs_g.toFixed(0),"g • Fat ",u.fat_g.toFixed(0),"g"]}),v&&(0,r.jsxs)("p",{className:"mt-3 text-xs text-zinc-300",children:["Remaining: ",(0,r.jsxs)("span",{className:"text-sky-300",children:[v.calories.toFixed(0)," kcal"]})," • P"," ",v.protein_g.toFixed(0),"g • C ",v.carbs_g.toFixed(0),"g • F ",v.fat_g.toFixed(0),"g"]})]}),(0,r.jsx)(M,{onAdd:function(t){let s={id:crypto.randomUUID(),name:t,sortOrder:d.mealGroups.length,items:[],collapsed:!1},r={...d,mealGroups:[...d.mealGroups,s]};x(r),e.setDailyLog(r)}}),(0,r.jsx)("div",{className:"pointer-events-none absolute -right-16 top-0 h-40 w-40 rounded-full bg-white/10 blur-[90px]"})]})}),(0,r.jsx)(b.Z,{className:"border-white/10 bg-gradient-to-br from-[#05192d]/90 via-[#0e0f1d] to-[#1d0f24]/90 shadow-[0_30px_60px_rgba(3,7,18,0.55)]",children:(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,280px),1fr]",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm uppercase tracking-[0.2em] text-fuchsia-200",children:"Macro breakdown"}),(0,r.jsx)("div",{className:"text-xs text-zinc-400",children:"Share of today's intake"})]}),(0,r.jsxs)("div",{className:"text-xs text-zinc-500",children:[u.calories.toFixed(0)," kcal logged"]})]}),(0,r.jsx)(C,{breakdown:h})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm uppercase tracking-[0.2em] text-sky-200",children:"Goal progress"}),(0,r.jsx)("div",{className:"text-xs text-zinc-400",children:g?"Percent of targets for each macro":"Set macro targets to track progress"}),(0,r.jsx)(P,{totals:u,targets:g})]})]})}),(0,r.jsx)(k.N,{initial:!1,children:0===d.mealGroups.length?(0,r.jsx)(_.P.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0},className:"rounded-3xl border border-dashed border-white/15 bg-white/5 p-6 text-sm text-zinc-300",children:"No meal groups yet. Add one like “Meal 1” or “Snack”."},"empty"):(0,r.jsx)(_.P.div,{layout:!0,className:"grid gap-4",children:d.mealGroups.slice().sort((e,t)=>e.sortOrder-t.sortOrder).map(t=>(0,r.jsx)(F,{date:o,group:t,onChange:w,onDelete:()=>(function(t){let s={...d,mealGroups:d.mealGroups.filter(e=>e.id!==t)};x(s),e.setDailyLog(s)})(t.id)},t.id))},"groups")})]})]})]})]})}function M(e){let{onAdd:t}=e,[s,i]=(0,a.useState)("");return(0,r.jsxs)("div",{className:"flex w-full flex-col gap-3 rounded-3xl border border-white/10 bg-white/5 p-3 sm:w-auto sm:flex-row sm:items-end sm:bg-transparent sm:p-0",children:[(0,r.jsx)(v.p,{label:"Add meal group",placeholder:"Meal 1 / Snack / Post-workout",value:s,onChange:e=>i(e.target.value),className:"min-w-[220px]"}),(0,r.jsxs)(f.$,{variant:"ghost",className:"rounded-full bg-gradient-to-r from-sky-400 via-fuchsia-500 to-emerald-400 px-5 py-2 font-semibold text-white shadow-[0_10px_30px_rgba(236,72,153,0.35)] sm:w-auto",onClick:()=>{let e=s.trim();e&&(t(e),i(""))},children:[(0,r.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Add meal"]})]})}function C(e){let{breakdown:t}=e,s=t.reduce((e,t)=>e+t.grams,0),a=0,i=t.map(e=>{let t=s>0?e.grams/s*360:0,r=a,i=r+t;return a=i,"".concat(e.color," ").concat(r,"deg ").concat(i,"deg")}),l=i.length&&s>0?"conic-gradient(".concat(i.join(", "),")"):void 0;return(0,r.jsxs)("div",{className:"mt-4 flex flex-col items-center gap-6 sm:flex-row sm:items-start sm:gap-8",children:[(0,r.jsxs)("div",{className:"relative h-44 w-44",children:[(0,r.jsx)("div",{className:"h-full w-full rounded-full border border-white/10 bg-black/40 shadow-[0_20px_60px_rgba(3,7,18,0.6)]",style:l?{background:l}:{}}),(0,r.jsxs)("div",{className:"absolute inset-6 flex flex-col items-center justify-center rounded-full bg-zinc-950 text-center text-xs text-zinc-400",children:[(0,r.jsx)("div",{children:"Total"}),(0,r.jsxs)("div",{className:"text-lg font-semibold text-zinc-100",children:[s.toFixed(0),"g"]})]})]}),(0,r.jsx)("div",{className:"space-y-4 text-sm",children:t.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"h-3 w-3 rounded-full",style:{backgroundColor:e.color}}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"text-base font-semibold text-white",children:e.label}),(0,r.jsxs)("div",{className:"text-xs text-zinc-400",children:[e.grams.toFixed(0),"g"," ",s>0?"(".concat((e.grams/s*100).toFixed(0),"%)"):"(0%)"]})]})]},e.key))})]})}function P(e){var t,s,a;let{totals:i,targets:l}=e,n=[{key:"protein_g",label:"Protein",value:i.protein_g,target:null!=(t=null==l?void 0:l.protein_g)?t:null,color:"#38bdf8"},{key:"carbs_g",label:"Carbs",value:i.carbs_g,target:null!=(s=null==l?void 0:l.carbs_g)?s:null,color:"#34d399"},{key:"fat_g",label:"Fat",value:i.fat_g,target:null!=(a=null==l?void 0:l.fat_g)?a:null,color:"#fbbf24"}];return(0,r.jsx)("div",{className:"mt-4 space-y-4",children:n.map(e=>{let t=e.target?Math.min(100,e.value/e.target*100):0;return(0,r.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3 shadow-[0_10px_30px_rgba(0,0,0,0.35)]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.25em] text-zinc-400",children:[(0,r.jsx)("span",{children:e.label}),(0,r.jsxs)("span",{className:"tracking-normal text-xs",children:[e.value.toFixed(0),"g"," ",e.target?" / ".concat(e.target.toFixed(0),"g"):""]})]}),(0,r.jsx)("div",{className:"mt-2 h-3 rounded-full bg-white/10",children:(0,r.jsx)("div",{className:"h-full rounded-full transition-all",style:{width:e.target?"".concat(t,"%"):"0%",backgroundColor:e.color,opacity:e.target?1:.3}})}),e.target?null:(0,r.jsxs)("div",{className:"mt-1 text-[11px] text-zinc-500",children:["Set a target to track ",e.label.toLowerCase()," progress."]})]},e.key)})})}},7972:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(5155);s(2115);var a=s(4269);function i(e){let{className:t,children:s}=e;return(0,r.jsx)("div",{className:(0,a.cn)("w-full rounded-[28px] border border-white/10 bg-white/5 p-5 shadow-[0_30px_80px_rgba(2,4,13,0.65)] backdrop-blur-xl transition-colors duration-200 hover:border-white/20 sm:p-6",t),children:s})}}},e=>{e.O(0,[909,970,619,915,441,255,358],()=>e(e.s=3200)),_N_E=e.O()}]);